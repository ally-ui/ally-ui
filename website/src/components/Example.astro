---
import ExampleContainer from './ExampleContainer.svelte';
import type {KNOWN_FRAMEWORKS} from '../config';
import {highlight} from '../utils/highlight';
import {getCode} from '../utils/code';

type Props = {
	sources: Record<string, () => Promise<string>>;
	framework: keyof typeof KNOWN_FRAMEWORKS;
};

const {sources, framework} = Astro.props as Props;
const code = await getCode(sources, framework);
const [language, codeHTML] = highlight(code, framework);
---

<ExampleContainer client:idle language={language} codeHTML={codeHTML}>
	{
		framework === 'react' ? (
			<slot name="react" />
		) : framework === 'solid' ? (
			<slot name="solid" />
		) : framework === 'svelte' ? (
			<slot name="svelte" />
		) : framework === 'vue' ? (
			<slot name="vue" />
		) : (
			<>Example not available</>
		)
	}
</ExampleContainer>
